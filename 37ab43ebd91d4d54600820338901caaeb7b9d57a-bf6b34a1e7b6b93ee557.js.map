{"version":3,"sources":["webpack:///./src/components/tic-tac-toe/atoms/Board/Board.view.js","webpack:///./src/components/tic-tac-toe/atoms/Board/index.js","webpack:///./src/components/tic-tac-toe/atoms/Link/Link.view.js","webpack:///./src/components/tic-tac-toe/atoms/Link/index.js","webpack:///./src/components/tic-tac-toe/explanations/utils/game.js","webpack:///./src/components/tic-tac-toe/atoms/Board/Board.module.scss","webpack:///./src/components/tic-tac-toe/explanations/completTree/index.js","webpack:///./src/components/tic-tac-toe/translation.js","webpack:///./src/components/tic-tac-toe/explanations/utils/index.js"],"names":["Board","width","height","state","winner","solution","transform","localAction","globalAction","victory","addedIndex","className","classes","board","pointerClickable","onClick","undefined","x","y","toLowerCase","winnerX","winnerO","winnerUnKnoned","winnerNull","winnerSelected","elements","split","map","player","index","Math","floor","key","X","justAdded","x1","y1","x2","y2","O","r","min","cx","cy","solutionX","solutionO","solutionUnKnoned","solutionNull","solutionSelected","empty","clickable","grid","length","col","line","winningLine","Link","x0","y0","style","stroke","strokeWidth","fill","d","Game","PLAYERS","NULL","EMPTY","UNKNOW","actions","output","push","getPlayerID","stateOrPlayer","step","i","this","indexOf","getPlayer","getAdversary","play","action","substring","isFull","isFinished","getWinner","getVictory","module","exports","game","CompletTree","props","treeRobot","feelSolutions","robot","optTreeRobot","reduceToOpimalTree","tree","initialTree","timeToWin","heightLimited","toogleChildrens","id","setState","retracted","reset","toogleHeightLimited","render","translation","translate","lang","treePositions","treeToPosition","reduce","t","max","viewBox","Fragment","parseInt","charAt","parent","SIZE","React","Component","fr","first_player","second_player","show_solution","next","extend","retract","case0","case1","case2","case3","case5","case6","case4","intro","possibleActions","winningIntro","winning","winnings","nullIntro","null","nulls","loosing","has","are","is","en","curentPlayer","minTimeToWin","posibilities","adversary","ends","final","newState","result","includes","filter","total","currentIndexList","currentActionsList","join","currentState","goingBack","parent_position","childrenActions","slice","pop","treeToFeel","bestAction","newGrid","minimalTimeToWin","forEach","completTree","perfectPlayer","solutions","score","random"],"mappings":"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","file":"37ab43ebd91d4d54600820338901caaeb7b9d57a-bf6b34a1e7b6b93ee557.js","sourcesContent":["import React from \"react\"\nimport classes from \"./Board.module.scss\"\n\nconst Board = ({\n  width,\n  height,\n  state,\n  winner,\n  solution,\n  transform,\n  localAction,\n  globalAction,\n  victory,\n  addedIndex,\n}) => (\n  <g\n    className={`${classes.board} ${classes.winner} ${\n      globalAction ? classes.pointerClickable : \"\"\n    }`}\n    transform={transform}\n    onClick={globalAction ? globalAction() : undefined}\n  >\n    <rect\n      x={0}\n      y={0}\n      width={width}\n      height={height}\n      className={`${\n        winner\n          ? winner.toLowerCase() === \"x\"\n            ? classes.winnerX\n            : winner.toLowerCase() === \"o\"\n            ? classes.winnerO\n            : winner.toLowerCase() === \".\"\n            ? classes.winnerUnKnoned\n            : winner.toLowerCase() === \"n\"\n            ? classes.winnerNull\n            : winner.toLowerCase() === \"n\"\n            ? classes.winnerSelected\n            : \"\"\n          : \"\"\n      }`}\n\n      // onClick={globalAction && globalAction()}\n    />\n    <g className={classes.elements}>\n      {state.split(\"\").map((player, index) => {\n        let x = width / 6 + (Math.floor(index % 3) * width) / 3\n        let y = height / 6 + (Math.floor(index / 3) * height) / 3\n\n        switch (player) {\n          case \"X\":\n            return (\n              <g\n                key={index}\n                className={`${classes.X} ${\n                  addedIndex === index ? classes.justAdded : \"\"\n                }`}\n              >\n                <line\n                  x1={x - (width * 0.4) / 3}\n                  y1={y - (height * 0.4) / 3}\n                  x2={x + (width * 0.4) / 3}\n                  y2={y + (height * 0.4) / 3}\n                />\n                <line\n                  x1={x + (width * 0.4) / 3}\n                  y1={y - (height * 0.4) / 3}\n                  x2={x - (width * 0.4) / 3}\n                  y2={y + (height * 0.4) / 3}\n                />\n              </g>\n            )\n          case \"O\":\n            return (\n              <g\n                key={index}\n                className={`${classes.O} ${\n                  addedIndex === index ? classes.justAdded : \"\"\n                }`}\n              >\n                <circle r={(Math.min(width, height) * 0.4) / 3} cx={x} cy={y} />\n              </g>\n            )\n\n          default:\n            return (\n              <rect\n                key={index}\n                x={x - (width * 0.4) / 3}\n                y={y - (height * 0.4) / 3}\n                width={(width * 0.8) / 3}\n                height={(height * 0.8) / 3}\n                className={`${solution &&\n                  (solution[index] === \"x\"\n                    ? classes.solutionX\n                    : solution[index] === \"o\"\n                    ? classes.solutionO\n                    : solution[index] === \".\"\n                    ? classes.solutionUnKnoned\n                    : solution[index] === \"n\"\n                    ? classes.solutionNull\n                    : solution[index] === \"n\"\n                    ? classes.solutionSelected\n                    : classes.empty)} ${\n                  !solution && localAction ? classes.clickable : \"\"\n                } `}\n                onClick={localAction ? localAction(index) : undefined}\n              />\n            )\n        }\n      })}\n    </g>\n    <g className={classes.grid}>\n      <line x1={(width * 1) / 3} y1=\"0\" x2={(width * 1) / 3} y2={height} />\n      <line x1={(width * 2) / 3} y1=\"0\" x2={(width * 2) / 3} y2={height} />\n\n      <line x1=\"0\" y1={(height * 1) / 3} x2={width} y2={(height * 1) / 3} />\n      <line x1=\"0\" y1={(height * 2) / 3} x2={width} y2={(height * 2) / 3} />\n    </g>\n    {victory && victory.length === 2 && (\n      <line\n        x1={width / 6 + (width * victory[1].col) / 3}\n        y1={height / 6 + (height * victory[1].line) / 3}\n        x2={width / 6 + (width * victory[0].col) / 3}\n        y2={height / 6 + (height * victory[0].line) / 3}\n        className={classes.winningLine}\n      />\n    )}\n  </g>\n)\n\nexport default Board\n","import Board from'./Board.view'\n\nexport default Board","import React from \"react\"\n\nconst Link = ({ x0, y0, x1, y1 }) => (\n  <path\n    style={{\n      stroke: \"var(--gray-700)\",\n      strokeWidth: 3,\n      fill: \"none\",\n    }}\n    d={`M${x0} ${y0} H${(x1 + x0) / 2} V${y1} H${x1}`}\n  />\n)\n\nexport default Link\n","import Link from'./Link.view'\n\nexport default Link","export default class Game {\n  PLAYERS = [\"X\", \"O\"];\n  NULL = \"n\";\n  EMPTY = \".\";\n  UNKNOW = \"?\";\n\n  actions(state) {\n    let output = [];\n    for (let index = 0; index < 9; index++) {\n      if (state[index] === \".\") {\n        output.push(index);\n      }\n    }\n    return output;\n  }\n\n  getPlayerID(stateOrPlayer) {\n    if (stateOrPlayer.length === 9) {\n      let step = 0;\n      for (let i = 0; i < 9; i++) {\n        if (stateOrPlayer[i] !== \".\") {\n          step++;\n        }\n      }\n      return step % 2;\n    }\n    else if(stateOrPlayer.length === 1){\n        return this.PLAYERS.indexOf(stateOrPlayer);\n    }\n    else{\n        return null;\n    }\n  }\n\n  getPlayer(state) {\n    return this.PLAYERS[this.getPlayerID(state)];\n  }\n\n  getAdversary(player) {\n    if (player === this.PLAYERS[0]) {\n      return this.PLAYERS[1];\n    }\n    if (player === this.PLAYERS[1]) {\n      return this.PLAYERS[0];\n    }\n  }\n\n\n  play(state, action) {\n    let player = this.getPlayer(state);\n    let newState =\n      state.substring(0, action) + player + state.substring(action + 1);\n    return newState;\n  }\n\n  isFull(state) {\n    for (let i = 0; i < 9; i++) {\n      if (state[i] === \".\") {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  isFinished(state) {\n    for (let i = 0; i < 3; i++) {\n      if (\n        state[3 * i] === state[3 * i + 1] &&\n        state[3 * i + 1] === state[3 * i + 2] &&\n        state[3 * i] !== this.EMPTY\n      ) {\n        return true;\n      }\n      if (\n        state[i] === state[3 + i] &&\n        state[3 + i] === state[6 + i] &&\n        state[i] !== this.EMPTY\n      ) {\n        return true;\n      }\n    }\n    if (\n      state[0] === state[4] &&\n      state[4] === state[8] &&\n      state[0] !== this.EMPTY\n    ) {\n      return true;\n    }\n    if (\n      state[2] === state[4] &&\n      state[4] === state[6] &&\n      state[2] !== this.EMPTY\n    ) {\n      return true;\n    }\n    return this.isFull(state);\n  }\n\n  getWinner(state) {\n    for (let i = 0; i < 3; i++) {\n      if (\n        state[3 * i] === state[3 * i + 1] &&\n        state[3 * i + 1] === state[3 * i + 2] &&\n        state[3 * i] !== this.EMPTY\n      ) {\n        return state[3 * i];\n      }\n      if (\n        state[i] === state[3 + i] &&\n        state[3 + i] === state[6 + i] &&\n        state[i] !== this.EMPTY\n      ) {\n        return state[i];\n      }\n    }\n    if (\n      state[0] === state[4] &&\n      state[4] === state[8] &&\n      state[0] !== this.EMPTY\n    ) {\n      return state[0];\n    }\n    if (\n      state[2] === state[4] &&\n      state[4] === state[6] &&\n      state[2] !== this.EMPTY\n    ) {\n      return state[2];\n    }\n    if (this.isFull(state)) {\n      return this.NULL;\n    }\n    return this.UNKNOW;\n  }\n\n  getVictory(state) {\n    for (let i = 0; i < 3; i++) {\n      if (\n        state[3 * i] === state[3 * i + 1] &&\n        state[3 * i + 1] === state[3 * i + 2] &&\n        state[3 * i] !== this.EMPTY\n      ) {\n        return [{col: 0, line:i},{col: 2, line:i}];\n      }\n      if (\n        state[i] === state[3 + i] &&\n        state[3 + i] === state[6 + i] &&\n        state[i] !== this.EMPTY\n      ) {\n        return [{col: i, line:0},{col: i, line:2}];\n      }\n    }\n    if (\n      state[0] === state[4] &&\n      state[4] === state[8] &&\n      state[0] !== this.EMPTY\n    ) {\n      return [{col: 0, line:0},{col: 2, line:2}];\n    }\n    if (\n      state[2] === state[4] &&\n      state[4] === state[6] &&\n      state[2] !== this.EMPTY\n    ) {\n      return [{col: 2, line:0},{col: 0, line:2}];\n    }\n    return [];\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"empty\":\"Board-module--empty--2at2_\",\"solutionX\":\"Board-module--solutionX--29UuD\",\"solutionO\":\"Board-module--solutionO--qbPeo\",\"solutionNull\":\"Board-module--solutionNull--1KV_z\",\"X\":\"Board-module--X--2zGWE\",\"O\":\"Board-module--O--2NKva\",\"elements\":\"Board-module--elements--2BaTp\",\"justAdded\":\"Board-module--justAdded--1vGwY\",\"grid\":\"Board-module--grid--MzpsS\",\"board\":\"Board-module--board--1Bt2G\",\"winnerX\":\"Board-module--winnerX--3mQwK\",\"winnerO\":\"Board-module--winnerO--1fB91\",\"winnerNull\":\"Board-module--winnerNull--1BuC2\",\"winner\":\"Board-module--winner--2UvVY\",\"winnerSelected\":\"Board-module--winnerSelected--15ZkP\",\"clickable\":\"Board-module--clickable--_gDQa\",\"pointerClickable\":\"Board-module--pointerClickable--10xaW\",\"winningLine\":\"Board-module--winningLine--23YXB\"};","import React from \"react\"\nimport Board from \"src/components/tic-tac-toe/atoms/Board\"\nimport Game from \"src/components/tic-tac-toe/explanations/utils/game\"\nimport Link from \"src/components/tic-tac-toe/atoms/Link\"\nimport {\n  treeToPosition,\n  feelSolutions,\n  reduceToOpimalTree,\n} from \"src/components/tic-tac-toe/explanations/utils\"\nimport translate from \"../../translation\"\n\nconst game = new Game()\n\nclass CompletTree extends React.Component {\n  constructor(props) {\n    super(props)\n\n    let treeRobot = {}\n\n    feelSolutions(treeRobot, \".........\", 0, props.robot)\n\n    let optTreeRobot = {}\n    reduceToOpimalTree(treeRobot, optTreeRobot, \"\", \".........\", 0, props.robot)\n    this.state = {\n      robot: props.robot,\n      tree: optTreeRobot,\n      initialTree: optTreeRobot,\n      height: optTreeRobot[\"\"].timeToWin,\n      heightLimited: true,\n    }\n  }\n\n  toogleChildrens(id) {\n    return () => () => {\n      this.setState({\n        tree: {\n          ...this.state.tree,\n          [id]: {\n            ...this.state.tree[id],\n            retracted: !this.state.tree[id].retracted,\n          },\n        },\n      })\n    }\n  }\n\n  reset() {\n    return () => {\n      this.setState({\n        ...this.state,\n        tree: this.state.initialTree,\n      })\n    }\n  }\n  toogleHeightLimited() {\n    return () => {\n      this.setState({\n        ...this.state,\n        heightLimited: !this.state.heightLimited,\n      })\n    }\n  }\n\n  render() {\n    const translation = translate[this.props.lang || \"en\"]\n    const SIZE = 75\n    const treePositions = treeToPosition(this.state.tree)\n    const height = treePositions.reduce((t, x) => Math.max(t, x.y), 0)\n    return (\n      <>\n        <div\n          className={this.state.heightLimited ? \"limit-height\" : \"free-height\"}\n        >\n          <svg\n            viewBox={`0 0 1000 ${100 * (height + 1)}`}\n            style={{ width: \"100%\" }}\n          >\n            {treePositions.map(state => (\n              <React.Fragment key={state.id}>\n                <Board\n                  width={SIZE}\n                  height={SIZE}\n                  state={state.grid}\n                  transform={`translate(${12 + state.x * 100},${12 +\n                    state.y * 100})`}\n                  globalAction={this.toogleChildrens(state.id)}\n                  winner={state.winner}\n                  victory={game.getVictory(state.grid)}\n                  addedIndex={\n                    state.id && parseInt(state.id.charAt(state.id.length - 1))\n                  }\n                />\n                {state.parent && (\n                  <Link\n                    x0={14 + state.parent[0] * 100 + SIZE}\n                    y0={12 + state.parent[1] * 100 + SIZE / 2}\n                    x1={10 + state.x * 100}\n                    y1={12 + state.y * 100 + SIZE / 2}\n                  />\n                )}\n              </React.Fragment>\n            ))}\n          </svg>\n        </div>\n        {100 * (height + 1) > 500 && (\n          <button\n            onClick={this.toogleHeightLimited()}\n            className=\"treeExtension\"\n          >\n            {this.state.heightLimited ? \"Extend\" : \"Retract\"}\n          </button>\n        )}\n        <button onClick={this.reset()}>{translation[\"reset\"]}</button>\n      </>\n    )\n  }\n}\nexport default CompletTree\n","export default {\n  fr: {\n    reset: \"Réinitialiser\",\n    first_player: \"Premier Joueur\",\n    second_player: \"Second Joueur\",\n    show_solution: \"Afficher la solution pour\",\n    next: \"Suivant\",\n    extend: \"Etendre\",\n    retract: \"Retracter\",\n    case0: \"Regardons qui sont les enfants de cette grille\",\n    case1: \"Commençons par le premier enfant\",\n    case2: \"On connaît l'état de cet enfant. Passons au suivant.\",\n    case3:\n      \"Tous les enfants ont été traité, on peut en déduire qui va gagner avec leur parent\",\n    case5: \"Il y a encore un enfant inconnu, allons voir son résultat\",\n    case6: \"Vous avez testé toutes les possibilités\",\n    case4: {\n      intro: \"Pour cette grille le joueur \",\n      possibleActions: \"actions possibles.\",\n      winningIntro: \"Pour cette action, il y \",\n      winning: \"position gagnante\",\n      winnings: \"positions gagnantes\",\n      nullIntro: \"Parmi ces actions, il n'y a pas de gagnant, mais \",\n      null: \"position nulle\",\n      nulls: \"positions nulles\",\n      loosing: \"In those actions, there is only losing losing one\",\n    },\n    has: \"a\",\n    are: \"sont\",\n    is: \"est\",\n  },\n  en: {\n    reset: \"Reset\",\n    first_player: \"First Player\",\n    second_player: \"Second Player\",\n    show_solution: \"Show solution for\",\n    next: \"Next\",\n    extend: \"Extend\",\n    retract: \"Retract\",\n    case0: \"Let see who are the child of this element\",\n    case1: \"Let start by studying its first child\",\n    case2: \"We know the result for this child, lets continue\",\n    case3:\n      \"All children are computed, we can get the winner of the current grid\",\n    case5: \"There is a unknown child, let's comput its result\",\n    case6: \"You tested all the possibilities\",\n    case4: {\n      intro: \"For this grid, the player \",\n      possibleActions: \"possible actions.\",\n      winningIntro: \"In those actions, there\",\n      winning: \"wininning position\",\n      winnings: \"wininning positions\",\n      nullIntro: \"In those actions, there is no winning one but\",\n      null: \"null position\",\n      nulls: \"null positions\",\n      loosing: \"In those actions, there is only losing losing one\",\n    },\n    has: \"has\",\n    are: \"are\",\n    is: \"is\",\n  },\n}\n","import Game from \"./game\"\n\nconst game = new Game()\n\n// function getTree(state) {\n//   //return a tree which conatins all possibilities\n//   if (game.isFinished(state)) {\n//     return { state: state, winner: game.getWinner(state) };\n//   } else {\n//     let PossibleActions = game.actions(state);\n//     let output = { state: state };\n//     let player = game.getPlayer(state);\n//     let nulIsPossible = false;\n//     let playerWin = false;\n//     for (\n//       let actionIndex = 0;\n//       actionIndex < PossibleActions.length;\n//       actionIndex++\n//     ) {\n//       let action = PossibleActions[actionIndex];\n//       let subTree = getTree(game.play(state, action));\n//       output[action] = subTree;\n//       if (player === subTree[\"winner\"]) {\n//         playerWin = true;\n//       }\n//       if (subTree[\"winner\"] === game.NULL) {\n//         nulIsPossible = true;\n//       }\n//     }\n//     if (playerWin) {\n//       output[\"winner\"] = player;\n//     } else {\n//       if (nulIsPossible) {\n//         output[\"winner\"] = game.NULL;\n//       } else {\n//         output[\"winner\"] = game.getAdversary(player);\n//       }\n//     }\n//     return output;\n//   }\n// }\n\n// function getTreeEco(state) {\n//   //return a tree which stop after findin an winnig acction for the cureent player\n//   if (game.isFinished(state)) {\n//     return { state: state, winner: game.getWinner(state) };\n//   } else {\n//     let PossibleActions = game.actions(state);\n//     let output = { state: state };\n//     let player = game.getPlayer(state);\n//     let nulIsPossible = false;\n//     let playerWin = false;\n//     for (\n//       let actionIndex = 0;\n//       actionIndex < PossibleActions.length;\n//       actionIndex++\n//     ) {\n//       let action = PossibleActions[actionIndex];\n//       let subTree = getTree(game.play(state, action));\n//       output[action] = subTree;\n//       if (player === subTree[\"winner\"]) {\n//         playerWin = true;\n//         output[\"winner\"] = player;\n//         return output;\n//       }\n//       if (subTree[\"winner\"] === game.NULL) {\n//         nulIsPossible = true;\n//       }\n//     }\n//     if (playerWin) {\n//       output[\"winner\"] = player;\n//     } else {\n//       if (nulIsPossible) {\n//         output[\"winner\"] = game.NULL;\n//       } else {\n//         output[\"winner\"] = game.getAdversary(player);\n//       }\n//     }\n//     return output;\n//   }\n// }\n\nfunction feelSolutions(solution, state, curentPlayer, robot) {\n  // feel the object solution with\n  // entry: a grid\n  // output: the winer, how win after each action, and the number of leaf needed for the computation\n  let winner\n  let posibilities = []\n  let player = game.PLAYERS[curentPlayer]\n  let adversary = game.PLAYERS[(1 + curentPlayer) % 2]\n\n  if (solution[state] === undefined) {\n    solution[state] = {\n      ends: state,\n      curentPlayer: curentPlayer,\n      winner: \"\",\n      timeToWin: null,\n    }\n  }\n\n  if (game.getWinner(state) !== game.UNKNOW) {\n    winner = game.getWinner(state).toLowerCase()\n    solution[state].winner = winner\n    solution[state].timeToWin = 1\n    solution[state].final = true\n    return { winner: winner, timeToWin: 1 }\n  }\n\n  for (let action = 0; action < 9; action++) {\n    if (solution[state].ends[action] === game.EMPTY) {\n      //We don't know the issue of this action\n      let newState =\n        state.substring(0, action) + player + state.substring(action + 1)\n\n      let winner\n      let timeToWin\n      let result\n      if (\n        solution[newState] !== undefined &&\n        solution[newState].winner !== \"\"\n      ) {\n        //we already now the solution\n        winner = solution[newState].winner\n        timeToWin = solution[newState].timeToWin\n      } else {\n        result = feelSolutions(\n          solution,\n          newState,\n          (curentPlayer + 1) % 2,\n          robot\n        )\n        winner = result.winner\n        timeToWin = result.timeToWin\n      }\n\n      //We know who will win if current player play this action\n      solution[state].ends =\n        solution[state].ends.substring(0, action) +\n        winner +\n        solution[state].ends.substring(action + 1)\n\n      posibilities.push({ winner, timeToWin })\n    }\n  }\n\n  let minTimeToWin\n  if (posibilities.map(x => x.winner).includes(player.toLowerCase())) {\n    minTimeToWin = Math.min(\n      ...posibilities\n        .map(x => (x.winner === player.toLowerCase() ? x.timeToWin : null))\n        .filter(x => x !== null)\n    )\n    winner = player.toLowerCase()\n  } else {\n    if (posibilities.map(x => x.winner).includes(game.NULL)) {\n      minTimeToWin = Math.min(\n        ...posibilities\n          .map(x => (x.winner === game.NULL ? x.timeToWin : null))\n          .filter(x => x !== null)\n      )\n      winner = game.NULL\n    } else {\n      if (posibilities.map(x => x.winner).includes(adversary.toLowerCase())) {\n        minTimeToWin = Math.min(\n          ...posibilities\n            .map(x =>\n              x.winner === adversary.toLowerCase() ? x.timeToWin : null\n            )\n            .filter(x => x !== null)\n        )\n        winner = adversary.toLowerCase()\n      }\n    }\n  }\n\n  solution[state].winner = winner\n  if (curentPlayer === robot) {\n    solution[state].timeToWin = minTimeToWin\n  } else {\n    solution[state].timeToWin = posibilities\n      .map(x => x.timeToWin)\n      .reduce((total, x) => total + x)\n  }\n  return {\n    winner: solution[state].winner,\n    timeToWin: solution[state].timeToWin,\n  }\n}\n\n// function opimalTree(tree, state, curentPlayer, robot, origineX, origineY) {\n//   //return the minimal tree (in size) that prove robot will obtain at least a null match\n//   if (tree[state].final) {\n//     return [{ state, X: origineX, Y: origineY, winner: tree[state].winner }];\n//   }\n//   let player = game.PLAYERS[curentPlayer];\n\n//   if (curentPlayer === robot) {\n//     for (let action = 0; action < 9; action++) {\n//       if (state[action] === \".\") {\n//         let newState =\n//           state.substring(0, action) + player + state.substring(action + 1);\n//         if (\n//           tree[state].timeToWin === tree[newState].timeToWin &&\n//           tree[state].winner === tree[newState].winner\n//         ) {\n//           return [\n//             { state, X: origineX, Y: origineY, winner: tree[state].winner },\n//             ...opimalTree(\n//               tree,\n//               newState,\n//               (curentPlayer + 1) % 2,\n//               robot,\n//               origineX + 1,\n//               origineY\n//             )\n//           ];\n//         }\n//       }\n//     }\n//   } else {\n//     let output = [\n//       { state, X: origineX, Y: origineY, winner: tree[state].winner }\n//     ];\n//     for (let action = 0; action < 9; action++) {\n//       if (state[action] === \".\") {\n//         let newState =\n//           state.substring(0, action) + player + state.substring(action + 1);\n//         let subTree = opimalTree(\n//           tree,\n//           newState,\n//           (curentPlayer + 1) % 2,\n//           robot,\n//           origineX + 1,\n//           origineY\n//         );\n//         output = [...output, ...subTree];\n//         origineY = subTree[subTree.length - 1].Y + 1;\n//       }\n//     }\n//     return output;\n//   }\n// }\n\nfunction treeToPosition(tree) {\n  let height = 0\n  let currentIndexList = []\n  let currentActionsList = []\n  let id = currentActionsList.join(\"\")\n  let currentState = tree[id]\n  let goingBack = false\n\n  let output = []\n  output.push({\n    ...currentState,\n    x: currentActionsList.length,\n    y: height,\n    id: id,\n  })\n\n  let parent_position = [[0, 0]]\n  if (currentState.childrenActions.length > 0) {\n    currentIndexList.push(0)\n    currentActionsList.push(currentState.childrenActions[0])\n    currentState = tree[currentActionsList.join(\"\")]\n  }\n\n  while (currentIndexList.length > 0) {\n    currentActionsList = []\n    for (let i = 0; i < currentIndexList.length; i++) {\n      currentActionsList.push(\n        tree[currentActionsList.join(\"\")].childrenActions[currentIndexList[i]]\n      )\n    }\n    let id = currentActionsList.join(\"\")\n    currentState = tree[id]\n\n    if (!goingBack) {\n      //en mode forward on affiche les noeuds\n      output.push({\n        ...currentState,\n        x: currentActionsList.length,\n        y: height,\n        id: id,\n        parent: parent_position[parent_position.length - 1],\n      })\n      parent_position.push([currentActionsList.length, height])\n\n      if (currentState.childrenActions.length > 0) {\n        //si il y a des fils, on y va\n        currentIndexList.push(0)\n      } else {\n        //si non, on verifie la presence de voisins\n        currentState = tree[currentActionsList.slice(0, -1).join(\"\")]\n        parent_position.pop()\n\n        currentIndexList[currentIndexList.length - 1] =\n          currentIndexList[currentIndexList.length - 1] + 1\n      }\n    } else {\n      //en mode back, on considere\n      currentState = tree[currentActionsList.slice(0, -1).join(\"\")]\n\n      parent_position.pop()\n\n      currentIndexList[currentIndexList.length - 1] =\n        currentIndexList[currentIndexList.length - 1] + 1\n    }\n\n    if (\n      currentIndexList[currentIndexList.length - 1] >=\n        currentState.childrenActions.length ||\n      currentState.retracted\n    ) {\n      //si il n'y a plus d'enfant ou qu'on nous demande de ne pas les traiter\n      currentIndexList.pop()\n      goingBack = true\n    } else {\n      if (currentIndexList[currentIndexList.length - 1] !== 0) {\n        height += 1\n      }\n      goingBack = false\n    }\n  }\n  return output\n}\n\nfunction reduceToOpimalTree(tree, treeToFeel, id, grid, curentPlayer, robot) {\n  //return the minimal tree (in size) that prove robot will obtain at least a null match\n  if (game.isFinished(grid)) {\n    treeToFeel[id] = {\n      grid: grid,\n      ends: grid,\n      childrenActions: [],\n      timeToWin: tree[grid].timeToWin,\n      winner: tree[grid].winner,\n    }\n  } else {\n    const actions = game.actions(grid)\n\n    if (curentPlayer === robot) {\n      let bestAction\n      let newGrid\n      let minimalTimeToWin = 1000000\n\n      actions.forEach(action => {\n        newGrid = game.play(grid, action)\n        if (\n          tree[newGrid].timeToWin < minimalTimeToWin &&\n          tree[newGrid].winner === tree[grid].winner\n        ) {\n          minimalTimeToWin = tree[newGrid].timeToWin\n          bestAction = action\n        }\n      })\n      treeToFeel[id] = {\n        grid: grid,\n        ends: tree[grid].ends,\n        childrenActions: [bestAction],\n        timeToWin: tree[grid].timeToWin,\n        winner: tree[grid].winner,\n      }\n      reduceToOpimalTree(\n        tree,\n        treeToFeel,\n        id + bestAction,\n        game.play(grid, bestAction),\n        (curentPlayer + 1) % 2,\n        robot\n      )\n    } else {\n      treeToFeel[id] = {\n        grid: grid,\n        ends: tree[grid].ends,\n        childrenActions: actions,\n        timeToWin: tree[grid].timeToWin,\n        winner: tree[grid].winner,\n      }\n      actions.forEach(action => {\n        reduceToOpimalTree(\n          tree,\n          treeToFeel,\n          id + action,\n          game.play(grid, action),\n          (curentPlayer + 1) % 2,\n          robot\n        )\n      })\n    }\n  }\n}\n\nlet completTree = {}\nfeelSolutions(completTree, \".........\", 0, 2)\n\nfunction perfectPlayer(state) {\n  let solutions = completTree[state].ends\n  let victory = completTree[state].winner\n  let player = game.getPlayer(state)\n\n  let actions = []\n  if (victory === player.toLowerCase()) {\n    let nextGrid\n    let score\n    let bestScore = 0\n    for (let i = 0; i < 9; i++) {\n      if (solutions[i] === victory) {\n        nextGrid = completTree[game.play(state, i)].ends\n        score = nextGrid.split(\"\").filter(x => x === player.toLowerCase())\n          .length\n        if (score > bestScore) {\n          actions = [i]\n        } else if (score === bestScore) {\n          actions.push(i)\n        }\n      }\n    }\n  } else if (victory === game.NULL) {\n    for (let i = 0; i < 9; i++) {\n      if (solutions[i] === game.NULL) {\n        actions.push(i)\n      }\n    }\n  } else {\n    for (let i = 0; i < 9; i++) {\n      if (state[i] === game.EMPTY) {\n        actions.push(i)\n      }\n    }\n  }\n\n  let action = actions[Math.floor(actions.length * Math.random())]\n  return action\n}\n\nexport {\n  completTree,\n  perfectPlayer,\n  treeToPosition,\n  feelSolutions,\n  reduceToOpimalTree,\n}\n"],"sourceRoot":""}