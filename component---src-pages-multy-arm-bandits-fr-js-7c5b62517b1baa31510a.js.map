{"version":3,"sources":["webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.number.epsilon.js","webpack:///./src/components/MAB/demo.js","webpack:///./src/pages/multy-arm-bandits/fr.js"],"names":["$export","S","EPSILON","Math","pow","DisplayCat","status","useState","initialized","setInitialized","useEffect","className","classes","cat","init","notInit","role","aria-label","DisplaySeenCat","color","seenCats","style","backgroundColor","ResultsSynthesis","nbOK","nbKO","stats","colSpan","round","Number","getStatistic","results","wantedStatus","wantedIndex","filter","foodIndex","length","ResultsCats","colors","resultsContainer","map","id","key","statsContainer","CatList","catNumber","probaHappy","buttonsColor","console","log","aaa","foodOptions","Array","keys","cats","setCats","clearCatTimer","useRef","setResults","giveFood","clearTimeout","current","head","rest","newStatus","random","setTimeout","catList","onClick","Page","location","currentLanguage","title"],"mappings":"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","file":"component---src-pages-multy-arm-bandits-fr-js-7c5b62517b1baa31510a.js","sourcesContent":["// 20.1.2.1 Number.EPSILON\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { EPSILON: Math.pow(2, -52) });\n","import React, { useRef, useState, useEffect } from \"react\"\n\nimport classes from \"./style.module.scss\"\n\nconst DisplayCat = ({ status }) => {\n  const [initialized, setInitialized] = useState(false)\n\n  useEffect(() => {\n    if (status) {\n      setInitialized(true)\n    }\n  }, [status])\n\n  switch (status) {\n    case \"OK\":\n      return (\n        <div\n          className={`${classes.cat} ${\n            initialized ? classes.init : classes.notInit\n          }`}\n        >\n          <span role=\"img\" aria-label=\"cat in love\">\n            😻\n          </span>\n        </div>\n      )\n    case \"KO\":\n      return (\n        <div\n          className={`${classes.cat} ${\n            initialized ? classes.init : classes.notInit\n          }`}\n        >\n          <span role=\"img\" aria-label=\"cat disgusted\">\n            🙀\n          </span>\n        </div>\n      )\n    default:\n      return (\n        <div\n          className={`${classes.cat} ${\n            initialized ? classes.init : classes.notInit\n          }`}\n        >\n          <span role=\"img\" aria-label=\"cat waiting for food\">\n            😺\n          </span>\n        </div>\n      )\n  }\n}\n\nconst DisplaySeenCat = ({ status, color }) => {\n  switch (status) {\n    case \"OK\":\n      return (\n        <div\n          className={classes.seenCats}\n          style={{ backgroundColor: color }} //, order: 2 * foodIndex + 1\n        >\n          <span role=\"img\" aria-label=\"cat in love\">\n            😻\n          </span>\n        </div>\n      )\n    case \"KO\":\n      return (\n        <div\n          className={classes.seenCats}\n          style={{ backgroundColor: color }} //, order: 2 * foodIndex + 2\n        >\n          <span role=\"img\" aria-label=\"cat disgusted\">\n            🙀\n          </span>\n        </div>\n      )\n  }\n}\n\nconst ResultsSynthesis = ({ nbOK, nbKO, color }) => (\n  <table style={{ backgroundColor: color }} className={classes.stats}>\n    <tbody>\n      <tr>\n        <td>\n          <span role=\"img\" aria-label=\"cat in love\">\n            😻\n          </span>\n        </td>\n        <td>\n          <span role=\"img\" aria-label=\"cat disgusted\">\n            🙀\n          </span>\n        </td>\n      </tr>\n      <tr>\n        <td>{nbOK}</td>\n        <td>{nbKO}</td>\n      </tr>\n      <tr>\n        {nbOK + nbKO === 0 ? (\n          <td colSpan={2}>No stats</td>\n        ) : (\n          <>\n            <td>\n              {Math.round((nbOK / (nbOK + nbKO) + Number.EPSILON) * 100) ||\n                Math.round((nbOK / (nbOK + nbKO) + Number.EPSILON) * 10000) /\n                  100}\n              %\n            </td>\n            <td>\n              {Math.round((nbKO / (nbOK + nbKO) + Number.EPSILON) * 100) ||\n                Math.round((nbKO / (nbOK + nbKO) + Number.EPSILON) * 10000) /\n                  100}\n              %\n            </td>\n          </>\n        )}\n      </tr>\n    </tbody>\n  </table>\n)\n\nconst getStatistic = (results, wantedStatus, wantedIndex) =>\n  results.filter(\n    ({ status, foodIndex }) =>\n      status === wantedStatus && foodIndex === wantedIndex\n  ).length\n\nconst ResultsCats = ({ results, colors }) => (\n  <>\n    <div className={classes.resultsContainer}>\n      {results.map(({ id, status, foodIndex }) => (\n        <DisplaySeenCat key={id} status={status} color={colors[foodIndex]} />\n      ))}\n    </div>\n    <div className={classes.statsContainer}>\n      <ResultsSynthesis\n        nbOK={getStatistic(results, \"OK\", 0)}\n        nbKO={getStatistic(results, \"KO\", 0)}\n        color={colors[0]}\n      />\n      <ResultsSynthesis\n        nbOK={getStatistic(results, \"OK\", 1)}\n        nbKO={getStatistic(results, \"KO\", 1)}\n        color={colors[1]}\n      />\n    </div>\n  </>\n)\n\nconst initialiseCats = N => {\n  return [...Array(N).keys()].map(id => ({\n    id: id,\n    status: \"\",\n  }))\n}\n\nexport const CatList = ({ catNumber, probaHappy, buttonsColor }) => {\n  console.log(classes)\n  const aaa = classes.foodOptions\n  console.log(aaa)\n  const [cats, setCats] = useState(initialiseCats(catNumber))\n  const clearCatTimer = useRef(false)\n\n  const [results, setResults] = useState([])\n\n  const giveFood = foodIndex => () => {\n    clearTimeout(clearCatTimer.current)\n\n    const [head, ...rest] = cats.filter(\n      cat => cat.status !== \"KO\" && cat.status !== \"OK\"\n    )\n    if (head) {\n      const newStatus = Math.random() <= probaHappy[foodIndex] ? \"OK\" : \"KO\"\n\n      setCats([\n        {\n          id: head.id,\n          status: newStatus,\n        },\n        ...rest,\n      ])\n      setResults(results => [\n        ...results,\n        { id: head.id, status: newStatus, foodIndex: foodIndex },\n      ])\n\n      clearCatTimer.current = setTimeout(() => {\n        setCats(rest)\n      }, 1000)\n    }\n  }\n\n  return (\n    <>\n      <p className={classes.catList}>\n        {cats.map(({ id, status }) => (\n          <DisplayCat key={id} status={status} />\n        ))}\n      </p>\n\n      <div className={aaa}>\n        {aaa}\n        <button\n          onClick={giveFood(0)}\n          style={{ backgroundColor: buttonsColor[0] }}\n        >\n          🐟\n        </button>\n        <button\n          onClick={giveFood(1)}\n          style={{ backgroundColor: buttonsColor[1] }}\n        >\n          🍖\n        </button>\n      </div>\n\n      <ResultsCats results={results} colors={buttonsColor} />\n    </>\n  )\n}\n","import React, { useState } from \"react\"\n\nimport Layout from \"src/components/layout\"\n// import { Link } from \"gatsby\"\nimport SEO from \"src/components/seo\"\n\n// import classes from \"./style.module.scss\"\n\nimport { CatList } from \"src/components/MAB/demo\"\n\nconst Page = () => {\n  // deal with page state\n\n  //render\n  return (\n    <Layout location=\"/multy-arm-bandits\" currentLanguage=\"Français\">\n      <SEO title=\"Comment choisir son repas\" />\n      <h1>Comment choisir son repas</h1>\n      <CatList\n        catNumber={200}\n        probaHappy={[0.7, 0.4]}\n        buttonsColor={[\"blue\", \"red\"]}\n      />\n    </Layout>\n  )\n}\n\nexport default Page\n"],"sourceRoot":""}